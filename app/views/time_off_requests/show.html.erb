<% provide(:title, 'Time Off Request') %>

<div style='margin-left:0px;'>
  <h1 class='cross_platform_header'>Time Off Request</h1>
</div>

<div class='table-width-desktop'>
  <% if current_user.admin? %>
    <ul class = 'pull-right'>
      <%= bootstrap_form_for @time_off_request do |f| %>
        <%= f.hidden_field :approved, value: false %>
        <%= f.submit 'Deny', class: 'btn btn-danger' %>
      <% end %>
    </ul>
    <ul class = 'pull-right'>
      <%= bootstrap_form_for @time_off_request do |f| %>
        <%= f.hidden_field :approved, value: true %>
        <%= f.submit 'Approve', class: 'btn btn-success'  %>
      <% end %>
    </ul>
    <ul class = 'pull-right'>
      <%= link_to 'Edit Request', edit_time_off_request_path(@time_off_request),
        class: 'btn btn-default btn-primary' %>
    </ul>
  <% end %>



  <div class='pull-left'>
    <%= link_to ' Back', time_off_requests_path,
        class: 'glyphicon glyphicon-arrow-left' %>
  </div>

  <br>

  <table class='table table-bordered table-condensed' >
    <tr>
      <th style='width:25%'>Submitted By</th>
      <td>
      <%= link_to "#{@time_off_request.user.last_name},
                   #{ @time_off_request.user.first_name}",
                   user_path(id: @time_off_request.user.id) %>
      </td>
    </tr>
    <tr>
      <th>Location</th>
      <td></td>
    </tr>
    <tr>
      <th>Date Submitted</th>
      <td>
        <%= @time_off_request.created_at.strftime('%-m/%-d/%Y @ %I:%M%p') %>
      </td>
    </tr>
    <tr>
      <th>Start Date</th>
      <td>
        <%= @time_off_request.starts_at.strftime('%-m/%-d/%Y @ %I:%M%p') %>
      </td>
    </tr>
    <tr>
      <th>End Date</th>
      <td>
        <%= @time_off_request.ends_at.strftime('%-m/%-d/%Y @ %I:%M%p') %>
      </td>
    </tr>
    <tr>
      <th>Reason</th>
      <td>
        <%= @time_off_request.reason %>
      </td>
    </tr>
    <tr>
      <th>Status</th>
      <td class= <%=BooleanToWordsTimeOffCSS(@time_off_request.approved)%>>
        <%= BooleanToWordsTimeOff(@time_off_request.approved) %>
      </td>
    </tr>
    <tr>
      <th>Processed By</th>
      <td>
        <%= "#{User.find_by_id(@time_off_request.approved_by_user_id).last_name},
             #{User.find_by_id(@time_off_request.approved_by_user_id).first_name}" %>
      </td>
    </tr>
    <tr>
      <th>Processed On</th>
      <td>
        <%= @time_off_request.approved_at.strftime('%-m/%-d/%Y @ %I:%M%p') %>
      </td>
    </tr>
  </table>
</div>
