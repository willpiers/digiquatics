<div class='userform well'>
  <%= bootstrap_form_for(@chemical_record,
    style: :horizontal, left: 'col-sm-4', right: 'col-sm-8') do |f| %>
    <% if @chemical_record.errors.any? %>

      <div id='error_explanation'>
        <h2><%= pluralize(@chemical_record.errors.count, 'error') %>
          prohibited this chemical_record from being saved:</h2>
        <ul>
          <% @chemical_record.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
    <%= render 'shared/required' %>

    <div ng-app='digiquatics'>
      <div ng-controller='ChemicalRecordsCtrl'>

        <label>Location</label>
        <select ng-model='selected.location_id' class='form-control'>
          <option value=''>All Locations</option>
          <option ng-repeat='location in locations' value='{{location.id}}'>
            {{location.name}}
          </option>
        </select>
        <%= f.hidden_field :location_id, value: "{{selectedLocationId}}" %>

        <label>Pool</label>
        <select ng-model='selected.pool_id' class='form-control'>
          <option value=''>All Pools</option>
          <option ng-repeat='pool in pools | filter:{location_id: selected.location_id}' value='{{pool.id}}'>
            {{pool.name}}
          </option>
        </select>
        <%= f.hidden_field :pool_id, value: "{{pool_id}}" %>

      </div>
    </div>

    <%= f.text_field :free_chlorine_ppm, label: 'Free Chlorine ppm' %>
    <%= f.text_field :total_chlorine_ppm, label: 'Total Chlorine ppm *' %>
    <%= f.text_field :ph, label: 'PH *' %>
    <%= f.text_field :alkalinity %>
    <%= f.text_field :calcium_hardness, label: 'Calcium Hardness' %>
    <%= f.text_field :pool_temp, label: 'Pool Temp' %>
    <%= f.text_field :air_temp, label: 'Air Temp' %>
    <%= f.select :water_clarity, %w[Clear Cloudy],
                { label: 'Water Clarity' } %>

    <div class='hidden-xs hidden-sm'>
      <%= f.datetime_select :time_stamp, { label: 'Date', ampm: true} %>
    </div>

    <%= f.primary ( f.object.new_record? ?  'Submit' : 'Save Changes' ) %>

  <% end %>
</div>
</div>

