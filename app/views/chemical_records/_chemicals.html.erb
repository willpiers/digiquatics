<div class='table-responsive'>
  <table class='table table-hover table-condensed'>
    <thead>
      <tr style='word-wrap:break-word;'>
        <th><%= sortable 'chlorine_ppm', 'Cl' %></th>
        <th><%= sortable 'ph', 'Ph' %></th>
        <th><%= sortable 'alkalinity', 'Alk' %></th>
        <th><%= sortable 'calcium_hardness', 'CH' %></th>
        <th><%= sortable 'pool_temp', 'Pool(F)' %></th>
        <th class='hidden-xs hidden-sm'>
          <%= sortable 'air_temp', 'Air(F)' %>
        </th>
        <th class='hidden-xs hidden-sm'>
          <%= sortable 'si_index', 'SI index' %>
        </th>
        <th class='hidden-xs hidden-sm'>Status</th>
        <th><%= sortable 'date_stamp', 'Date' %></th>
        <th> Time</th>
      </tr>
    </thead>

    <tbody>
      <% @chemical_records.each do |chemical_record| %>
        <tr>
          <td><%= chemical_record.chlorine_ppm.round %></td>
          <td><%= chemical_record.ph.round(1) %></td>
          <td><%= chemical_record.alkalinity.round %></td>
          <td><%= chemical_record.calcium_hardness.round %></td>
          <td><%= chemical_record.pool_temp.round(1) %></td>
          <td class='hidden-xs hidden-sm'>
            <%= chemical_record.air_temp.round(1) %>
          </td>

          <% if si_index(chemical_record.ph, chemical_record.pool_temp,
                chemical_record.calcium_hardness, chemical_record.alkalinity)
                  .round(2) >= -0.3 and si_index(chemical_record.ph,
                    chemical_record.pool_temp,
                chemical_record.calcium_hardness, chemical_record.alkalinity)
                  .round(2) <= 0.3%>
            <td class='success hidden-xs hidden-sm'>
              <%= si_index(chemical_record.ph, chemical_record.pool_temp,
                chemical_record.calcium_hardness, chemical_record.alkalinity)
                  .round(2) %>
            </td>
            <td class='success hidden-xs hidden-sm'>
              <%= si_index_description(si_index(chemical_record.ph,
                chemical_record.pool_temp, chemical_record.calcium_hardness,
                  chemical_record.alkalinity)) %>
            </td>

          <% elsif si_index(chemical_record.ph, chemical_record.pool_temp,
                chemical_record.calcium_hardness, chemical_record.alkalinity)
                  .round(2) > 0.3 and si_index(chemical_record.ph,
                    chemical_record.pool_temp,
                chemical_record.calcium_hardness, chemical_record.alkalinity)
                  .round(2) < 3%>
            <td class='warning hidden-xs hidden-sm'>
              <%= si_index(chemical_record.ph, chemical_record.pool_temp,
                chemical_record.calcium_hardness, chemical_record.alkalinity)
                  .round(2) %>
            </td>
            <td class='warning hidden-xs hidden-sm'>
              <%= si_index_description(si_index(chemical_record.ph,
                chemical_record.pool_temp, chemical_record.calcium_hardness,
                  chemical_record.alkalinity)) %>
            </td>

            <% elsif si_index(chemical_record.ph, chemical_record.pool_temp,
                  chemical_record.calcium_hardness, chemical_record.alkalinity)
                    .round(2) < -0.3 and si_index(chemical_record.ph,
                      chemical_record.pool_temp,
                  chemical_record.calcium_hardness, chemical_record.alkalinity)
                    .round(2) > -3%>
              <td class='warning hidden-xs hidden-sm'>
                <%= si_index(chemical_record.ph, chemical_record.pool_temp,
                  chemical_record.calcium_hardness, chemical_record.alkalinity)
                    .round(2) %>
              </td>
              <td class='warning hidden-xs hidden-sm'>
                <%= si_index_description(si_index(chemical_record.ph,
                  chemical_record.pool_temp, chemical_record.calcium_hardness,
                    chemical_record.alkalinity)) %>
              </td>

            <% elsif si_index(chemical_record.ph, chemical_record.pool_temp,
                  chemical_record.calcium_hardness, chemical_record.alkalinity)
                    .round(2) >= 3 or si_index(chemical_record.ph,
                      chemical_record.pool_temp,
                  chemical_record.calcium_hardness, chemical_record.alkalinity)
                    .round(2) <= -3%>
              <td class='warning hidden-xs hidden-sm'>
                <%= si_index(chemical_record.ph, chemical_record.pool_temp,
                  chemical_record.calcium_hardness, chemical_record.alkalinity)
                    .round(2) %>
              </td>
              <td class='warning hidden-xs hidden-sm'>
                <%= si_index_description(si_index(chemical_record.ph,
                  chemical_record.pool_temp, chemical_record.calcium_hardness,
                    chemical_record.alkalinity)) %>
              </td>

          <% else %>
            <td>
            <%= si_index(chemical_record.ph, chemical_record.pool_temp,
              chemical_record.calcium_hardness, chemical_record.alkalinity)
                .round(2) %>
            </td>
            <td class='hidden-xs hidden-sm'>
              <%= si_index_description(si_index(chemical_record.ph,
                chemical_record.pool_temp, chemical_record.calcium_hardness,
                  chemical_record.alkalinity)) %>
            </td>
          <% end %>

          <td>
            <%= link_to chemical_record.date_stamp.strftime('%-m/%-d/%Y'),
              chemical_record %>
          </td>

          <td>
            <%= link_to chemical_record.time_stamp.strftime("%I:%M%p"),
              chemical_record %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <br>
</div>
