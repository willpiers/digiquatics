<% provide(:title, 'Chemical Statistics') %>
<h1>Chemical Statistics</h1>
<br>

<div class='row'>
  <div class='col-md-6 well'>
    <%= bootstrap_form_tag(url: '/chemical_record_stats', method: "post") do |f| %>
      <%= f.select :start_year,  options_for_select((2013..2020).to_a), label: 'Start Date' %>
      <%= f.select :start_month, [['March', 03], ['April', 04]], hide_label: :true %>
      <%= f.select :start_day,   options_for_select((1..31).to_a), hide_label: :true %>
      <%= f.select :end_year,    options_for_select((2013..2020).to_a), label: 'End Date' %>
      <%= f.select :end_month, [['March', 03], ['April', 04]], hide_label: :true %>
      <%= f.select :end_day,     options_for_select((1..31).to_a), hide_label: :true %>
      <%= f.primary 'Query Database' %>
    <% end %>

  </div>
  <div class='col-md-6'>
    <div class='table-responsive'>
      <table class='table table-bordered table-condensed'>
        <tr>
          <th>Type</th>
          <th>Min</th>
          <th>Max</th>
          <th>Avg</th>
          <th>Count</th>
        </tr>
        <tr>
          <td>Chlorine (PPM) </td>
          <td><%= @chemical_records.minimum('total_chlorine_ppm') %></td>
          <td><%= @chemical_records.maximum('total_chlorine_ppm') %></td>
          <td><%= @chemical_records.average('total_chlorine_ppm') %></td>
          <td><%= @chemical_records.count(:total_chlorine_ppm) %></td>
        </tr>
        <tr>
          <td>PH </td>
          <td><%= @chemical_records.minimum('ph') %></td>
          <td><%= @chemical_records.maximum('ph') %></td>
          <td><%= @chemical_records.average('ph') %></td>
          <td><%= @chemical_records.count(:ph) %></td>
        </tr>
        <tr>
          <td>Alkalinity </td>
          <td><%= @chemical_records.minimum('alkalinity') %></td>
          <td><%= @chemical_records.maximum('alkalinity') %></td>
          <td><%= @chemical_records.average('alkalinity') %></td>
          <td><%= @chemical_records.count(:alkalinity) %></td>
        </tr>
        <tr>
          <td>Calcium Hardness </td>
          <td><%= @chemical_records.minimum('calcium_hardness') %></td>
          <td><%= @chemical_records.maximum('calcium_hardness') %></td>
          <td><%= @chemical_records.average('calcium_hardness') %></td>
          <td><%= @chemical_records.count(:calcium_hardness) %></td>
        </tr>
        <tr>
          <td>Air Temp (F) </td>
          <td><%= @chemical_records.minimum('air_temp') %></td>
          <td><%= @chemical_records.maximum('air_temp') %></td>
          <td><%= @chemical_records.average('air_temp') %></td>
          <td><%= @chemical_records.count(:air_temp) %></td>
        </tr>
        <tr>
          <td>Pool Temp (F) </td>
          <td><%= @chemical_records.minimum('pool_temp') %></td>
          <td><%= @chemical_records.maximum('pool_temp') %></td>
          <td><%= @chemical_records.average('pool_temp') %></td>
          <td><%= @chemical_records.count(:pool_temp) %></td>
        </tr>
        <tr>
          <td>SI Index</td>
          <td><%= @chemical_records.minimum('si_index') %>
          </td>
          <td><%= @chemical_records
            .maximum('si_index') %>
          </td>
          <td><%= @chemical_records
            .average('si_index') %>
          <td><%= 'N/A' %></td>
        </tr>
      </table>
    </div>
  </div>
</div>
