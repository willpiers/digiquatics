<% provide(:title, 'Employee Statistics') %>
<h1 class='cross_platform_header'>Employee Statistics</h1>

<div class='table-width-desktop'>
  <div class='pull-left'>
    <%= link_to ' Back', users_path,
        class: 'glyphicon glyphicon-arrow-left' %>
  </div>

  <br><br>

  <h4>Basic Information</h4>
  <table class='table table-bordered'>
    <tr>
      <th style='width:50%'>Location</th><!-- TODO: pull this style out-->
      <th>Number <br/>Male</td>
      <th>Number <br/>Female</td>
      <th>Total <br/>Employees</td>
    </tr>
    <% @location.each do |location| %>
      <tr>
        <td><%= location.name %></td>
        <td><%= @users.where(location_id: location.id).count %></td>
        <td><%= @users.male.where(location_id: location.id).count %></td>
        <td><%= @users.female.where(location_id: location.id).count %></td>
      </tr>
    <% end %>
  </table>
</div>

<div class='table-width-desktop'>
  <h4>Classification</h4>
  <table class='table table-bordered'>
    <tr>
      <th style='width:50%'>Location</th><!-- TODO: pull this style out-->
      <th>Number <br/>Admin</td>
      <th>Number <br/>Active</td>
      <th>Number <br/>Inactive</td>
    </tr>
    <% @location.each do |location| %>
      <tr>
        <td><%= location.name %></td>
        <td><%= @users.admin.where(location_id: location.id).count %></td>
        <td><%= @users.active.where(location_id: location.id).count %></td>
        <td><%= @users.inactive.where(location_id: location.id).count %></td>
      </tr>
    <% end %>
  </table>
</div>

<div class='table-width-desktop'>
  <h4>Inventory</h4>
  <table class='table table-bordered'>
    <tr>
      <th style='width:25%'>Location</th><!-- TODO: pull this style out-->
      <th>Shirts</td>
      <th>Male <br/>Suit</td>
      <th>Female <br/>One-Piece</td>
      <th>Female <br/>Top</td>
      <th>Female <br/>Bottom</td>
    </tr>
    <% @location.each do |location| %>
      <tr>
        <td><%= location.name %></td>
        <td>
          <% User.group(:shirt_size).count.each do |key, value| %>
            <%= "#{key}:#{value} "%></br>
          <% end %>
        </td>
        <td>
          <% User.male.group(:suit_size).count.each do |key, value| %>
            <%= "#{key}:#{value} "%></br>
          <% end %>
        </td>
        <td>
          <% User.female.group(:femalesuit).count.each do |key, value| %>
            <%= "Size(#{key}): #{value} "%></br>
          <% end %>
        </td>
        <td>
          <% User.female.group(:shirt_size).count.each do |key, value| %>
            <%= "#{key}:#{value} "%></br>
          <% end %>
        </td>
        <td>
          <% User.female.group(:suit_size).count.each do |key, value| %>
            <%= "#{key}:#{value} "%></br>
          <% end %>
        </td>
      </tr>
    <% end %>
  </table>
</div>
