<div ng-app='digiquatics'>
  <div ng-controller='UsersCtrl'>
    <% provide(:title, 'Active Employees') %>
    <h1>Active Employees</h1>
    <br><br>
    <div class='row'>
      <div class='col-md-2'>
        <div class='input-group'>
          <input class='form-control' ng-model='search' type='text'placeholder='Search'/>
          <span class='input-group-addon'>
            <span class='glyphicon glyphicon-search'></span>
          </span>
        </div>
      </div>
      <div class='col-md-3'>
        <select ng-model='locationFilter' class='form-control'>
          <option value=''>All Locations</option>
          <option ng-repeat='location in locations' value='{{location.name}}'>{{location.name}}</option>
        </select>
      </div>
      <div class='col-md-3'></div>
      <div class='col-md-4'>
        <div class='btn-group'>
          <%= link_to 'Manage Inactive', inactive_index_path, class: 'btn btn-danger btn-sm', role: 'button' %>
          <%= link_to 'Add Employee', new_user_path, class: 'btn btn-primary btn-sm', role: 'button' %>
          <%= link_to 'Statistics', user_stats_path, class: 'btn btn-success btn-sm', role: 'button' %>
        </div>
      </div>
    </div>
    <br>
    <div class='table-responsive'>
      <table class='table table-hover table-condensed' >
        <thead>
          <tr>
            <th>
              <a href='' ng-click="predicate.value = 'last_name'; reverse=!reverse">
                Last Name
              </a>
            </th>
            <th>
              <a href='' ng-click="predicate.value = 'first_name'; reverse=!reverse">
                First Name
              </a>
            </th>
            <th>
              <a href='' ng-click="predicate.value = 'date_of_birth'; reverse=!reverse">
                Age
              </a>
            </th>
            <th>Location</th>
            <th>
              <a href='' ng-click="predicate.value = 'position.name'; reverse=!reverse">
                Position
              </a>
            </th>
            <th>
              <a href='' ng-click="predicate.value = 'email'; reverse=!reverse">
                Email
              </a>
            </th>
            <th>
              <a href='' ng-click="predicate.value = 'phone_number'; reverse=!reverse">
                Phone
              </a>
            </th>
            <th>
              <a href='' ng-click="predicate.value = 'admin'; reverse=!reverse">
                Admin
              </a>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat='user in users | orderBy:predicate.value:reverse | filter:locationFilter | filter:search' dq-user-row='user'>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
